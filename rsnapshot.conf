#################################################
# rsnapshot.conf - rsnapshot configuration file #
#################################################
#                                               #
# PLEASE BE AWARE OF THE FOLLOWING RULES:       #
#                                               #
# This file requires tabs between elements      #
#                                               #
# Directories require a trailing slash:         #
#   right: /home/                               #
#   wrong: /home                                #
#                                               #
#################################################
#################################################
# EML rsnapshot customization                   #
#################################################
#                                               #
# We change the way rsnaphot works with rsync   #
# to turn it into a 'hazel-like' clean up       #
# program that keeps 8 weeks of clean-ups at a  #
# time.                                         #
#                                               #
# This config will save the contents of:        #
# /Users/student/Desktop,                       #
# /Users/student/Documents,                     #
# /Users/student/Downloads,                     #
#                                               #
# in the Admin accounts home folder, which (we  #
# hope) is protected from the standard account. #
# It will keep the contents for 8 iterations of #
# the backup.                                   #
#                                               #
# This script should be run with:               #
# rsnapshot -c ../path/to/this/script weekly    #
# every Friday, in the morning, with cron or    #
# launchd.                                      #
#                                               # 
#################################################

#######################
# CONFIG FILE VERSION #
#######################

config_version	1.2

###########################
# SNAPSHOT ROOT DIRECTORY #
###########################

# All snapshots will be stored under this root directory.
#
snapshot_root	/Users/emladmin/student_cleanup/data/

#################################
# EXTERNAL PROGRAM DEPENDENCIES #
#################################

# ELM! Install gnu cp from `brew install coreutils` and select it here.
cmd_cp		/usr/local/bin/gcp

# uncomment this to use the rm program instead of the built-in perl routine.
#
cmd_rm		/bin/rm

# rsync must be enabled for anything to work. This is the only command that
# must be enabled.
#
cmd_rsync	/usr/bin/rsync

# Uncomment this to enable remote ssh backups over rsync.
#
#cmd_ssh	/usr/bin/ssh

# Comment this out to disable syslog support.
#
cmd_logger	/usr/bin/logger

# Uncomment this to specify the path to "du" for disk usage checks.
# If you have an older version of "du", you may also want to check the
# "du_args" parameter below.
#
cmd_du		/usr/bin/du

# Uncomment this to specify the path to rsnapshot-diff.
#
cmd_rsnapshot_diff	/usr/local/bin/rsnapshot-diff

#########################################
#           BACKUP INTERVALS            #
# Must be unique and in ascending order #
# i.e. hourly, daily, weekly, etc.      #
#########################################

interval	weekly	8

############################################
#              GLOBAL OPTIONS              #
# All are optional, with sensible defaults #
############################################

# Verbose level, 1 through 5.
# 1     Quiet           Print fatal errors only
# 2     Default         Print errors and warnings only
# 3     Verbose         Show equivalent shell commands being executed
# 4     Extra Verbose   Show extra verbose information
# 5     Debug mode      Everything
#
verbose		3

# Same as "verbose" above, but controls the amount of data sent to the
# logfile, if one is being used. The default is 3.
#
loglevel	3

# If you enable this, data will be written to the file you specify. The
# amount of data written is controlled by the "loglevel" parameter.
#
#logfile	/var/log/rsnapshot

# If enabled, rsnapshot will write a lockfile to prevent two instances
# from running simultaneously (and messing up the snapshot_root).
# If you enable this, make sure the lockfile directory is not world
# writable. Otherwise anyone can prevent the program from running.
#
lockfile	/Users/emladmin/student_cleanup/rsnapshot.pid

# Default rsync args. All rsync commands have at least these options set.
# EML! Here is the weird way we're doing this.
# Delete the file in the source directories, we only recurse, and only move links that
# are within source tree (meaning, a symlink to an archivematica folder somewhere else
# won't get moved. NOTE that aliases to Applications will but we don't want students making
# them anyway. NOTE also that this remove certain persistent folders that MS Office and
# Chrome leave in Documents. Again, we don't really care since we want to keep the 
# computers as close to frozen as possbile.

rsync_short_args	-r
rsync_long_args	--remove-source-files --relative --safe-links

# Default arguments for the "du" program (for disk space reporting).
# The GNU version of "du" is preferred. See the man page for more details.
# If your version of "du" doesn't support the -h flag, try -k flag instead.
#
du_args	-csh

###############################
### BACKUP POINTS / SCRIPTS ###
###############################

# LOCALHOST
backup	/Users/emladmin/Desktop/	Desktop/
backup	/Users/emladmin/Documents/	Documents/
backup	/Users/emladmin/Downloads/	Downloads/
